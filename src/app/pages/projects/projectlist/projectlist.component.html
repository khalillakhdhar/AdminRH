<div class="container-fluid">
  <app-page-title title="Demandes" [breadcrumbItems]="breadCrumbItems"></app-page-title>

  <div class="row">
    @for(demande of returnedArray; track demande.id){
    <div class="col-xl-4 col-sm-6">
      <div class="card">
        <div class="card-body">
          <h5 class="text-dark">{{ demande.description || 'Aucune description' }}</h5>
          <p class="text-muted mb-2">
            <i class="mdi mdi-calendar me-1"></i> {{ demande.datecreation || 'N/A' }}
          </p>

          <p class="text-muted mb-2">
            <i class="mdi mdi-account me-1"></i> {{ demande.typeDemande || 'Autres' }}
          </p>
    <p class="text-muted mb-2">
            <i class="mdi mdi-account me-1"></i> {{ demande.etat || 'En Attente' }}
          </p>
        </div>
        <div *ngIf="currentUser.role==='Administrateur' && demande.etat==='en attente'" class="card-footer d-flex justify-content-between">
          <!-- accepter ou refuser demande-->
          <button class="btn btn-sm btn-success" (click)="acceptDemande(demande.id,demande)">Accepter</button>
          <button class="btn btn-sm btn-warning" (click)="refuseDemande(demande.id,demande)">Refuser</button>
          <button class="btn btn-sm btn-danger" (click)="deleteDemande(demande.id)">Supprimer</button>
        </div>
      </div>
    </div>
    }
  </div>

  <div class="row">
    <div class="col-lg-12">
      <ul class="pagination justify-content-center p-3">
        <pagination
          class="pagination-wrap hstack gap-2"
          [totalItems]="demandeList.length"
          [itemsPerPage]="6"
          (pageChanged)="pageChanged($event)">
        </pagination>
      </ul>
    </div>
  </div>
</div>
